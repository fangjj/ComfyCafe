<template name="post">
  {{> topBar}}
  <main>
    <div class="medium">
      {{#with medium}}
        {{#if isImage}}
          <img src="/gridfs/media/{{md5}}">
        {{/if}}
        {{#if isVideo}}
          <video id="video{{_id}}" src="/gridfs/media/{{md5}}" controls>
            <source src="/gridfs/media/{{md5}}" type="{{type}}">
          </video>
        {{/if}}
        {{#if isAudio}}
          <audio id="audio{{_id}}" src="/gridfs/media/{{md5}}" controls>
            <source src="/gridfs/media/{{md5}}" type="{{type}}">
          </audio>
        {{/if}}
      {{else}}
        <div class="uhoh">
          404 - Dead Forever
        </div>
      {{/with}}
    </div>
  </main>
  {{#if showInfoBox}}
    <div class="postInfo">
      {{> avatar class="small" profile=uploader.profile title=uploader.username}}
      <div class="info">
        by <a href="{{pathFor route='user.view' username=uploader.username}}">{{uploader.username}}</a>
        at <time>{{createdAt}}</time>
        <br>
        {{#unless isOwner}}
          <a class="waves-effect waves-light btn">
            <i class="material-icons left">add_box</i>
            Subscribe
          </a>
        {{/unless}}
      </div>
    </div>
  {{/if}}
  {{#if showEditButton}}
    <div id="fabModify" class="fixed-action-btn">
      <a class="btn-floating btn-large">
        <i class="large material-icons">mode_edit</i>
      </a>
      <ul>
        <li><a id="fabDelete" class="btn-floating red waves-effect waves-light tooltipped" data-position="left" data-tooltip="Delete {{name}}?"><i class="material-icons">delete</i></a></li>
        <li><a id="fabReroll" class="btn-floating blue waves-effect waves-light tooltipped" data-position="left" data-tooltip="Reroll name!"><i class="material-icons">casino</i></a></li>
      </ul>
    </div>
  {{/if}}
  {{#if showFavoriteButton}}
    <div id="fabFavorite" class="fixed-action-btn">
      <a class="btn-floating btn-large">
        <i class="large material-icons">
          {{#if favorited}}
            star
          {{else}}
            star_border
          {{/if}}
        </i>
      </a>
    </div>
  {{/if}}
</template>
