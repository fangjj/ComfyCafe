<template name="topBar">
	<nav id="topBar">
		<div class="nav-wrapper">
			<ul class="left topLevel">
				<li class="searchButton">
					<a class="waves-effect waves-teal">
						<i class="material-icons">search</i>
						<label for="search"></label>
					</a>
				</li>
			</ul>

			<a class="brand-logo center hide-on-small-only" href="/">TeruImages</a>

			<ul class="right topLevel">
				{{#if currentUser}}
					<li>
						<a href="{{pathFor route='feed'}}" class="waves-effect waves-teal">
							<i class="material-icons left">local_dining</i>
							<span class="hide-on-med-and-down">Feed</span>
						</a>
					</li>
				{{/if}}
				<li>
					<a href="{{pathFor route='browse'}}" class="waves-effect waves-teal">
						<i class="material-icons left">view_comfy</i>
						<span class="hide-on-med-and-down">Browse</span>
					</a>
				</li>
				{{#if currentUser}}
					<li>
						<a id="notificationListToggle" class="waves-effect waves-teal">
							<i class="material-icons">notifications</i>
							{{#if notifications.count}}
								<span class="push teal">{{notifications.count}}</span>
							{{/if}}
						</a>
					</li>
					<li>
						<a id="accountActionsToggle" class="waves-effect waves-teal" href="{{pathFor route='profile' username=currentUser.username}}">
							{{> reactiveAvatar class="topBar" id=currentUser._id avatars=currentUser.avatars title=currentUser.username}}
						</a>
					</li>
				{{else}}
					<li id="topLogin" class="waves-effect waves-teal">
						{{> atNavButton}}
					</li>
				{{/if}}
			</ul>

			<div id="notificationArrow" class="notifications"></div>
			<div id="notificationList" class="notifications">
				<ul>
					{{#each notifications}}
						{{> notification}}
					{{else}}
						<li>No notifications.</li>
					{{/each}}
				</ul>
			</div>

			<div id="accountActionsArrow" class="accountActions"></div>
			<div id="accountActions" class="accountActions">
				<ul>
					<li>
						<a href="{{pathFor route='profile' username=currentUser.username}}" class="waves-effect waves-teal">
							<i class="material-icons left">account_circle</i>
							<span>View Profile</span>
						</a>
					</li>
					<li>
						<a href="{{pathFor route='yourPosts'}}" class="waves-effect waves-teal">
							<i class="material-icons left">view_comfy</i>
							<span>Manage Posts</span>
						</a>
					</li>
					<li>
						<a href="{{pathFor route='favorites'}}" class="waves-effect waves-teal">
							<i class="material-icons left">star</i>
							<span>Favorites (Deprecated)</span>
						</a>
					</li>
					<li>
						<a href="{{pathFor route='invites'}}" class="waves-effect waves-teal">
							<i class="material-icons left">weekend</i>
							<span>Manage Invites</span>
						</a>
					</li>
					<li>
						<a href="{{pathFor route='settings'}}" class="waves-effect waves-teal">
							<i class="material-icons left">settings</i>
							<span>Edit Settings</span>
						</a>
					</li>
				</ul>
				<div class="row">
					<div class="col s12">
						{{> atNavButton}}
					</div>
				</div>
			</div>

			<form id="searchForm">
				<div class="input-field">
					<input id="search" type="search">
					<i class="material-icons searchClose">close</i>
				</div>
			</form>
		</div>
	</nav>
</template>
